<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Neon Survivor</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">

<style>
body {
  margin: 0;
  background: radial-gradient(circle, #050510, #000);
  color: #0ff;
  font-family: Arial, sans-serif;
  text-align: center;
  touch-action: none;
}

h2 { margin: 5px; }

canvas {
  background: #050510;
  display: block;
  margin: auto;
  border: 2px solid #0ff;
  box-shadow: 0 0 20px #0ff;
}

.controls {
  display: flex;
  justify-content: center;
  gap: 15px;
  margin: 10px;
}

.btn {
  width: 65px;
  height: 65px;
  border-radius: 50%;
  background: #111;
  border: 2px solid #0ff;
  color: #0ff;
  font-size: 28px;
  display: flex;
  align-items: center;
  justify-content: center;
}

.btn:active {
  background: #0ff;
  color: black;
}

.info {
  font-size: 14px;
}
</style>
</head>

<body>

<h2>‚ö° NEON SURVIVOR ‚ö°</h2>

<canvas id="game" width="360" height="500"></canvas>

<div class="controls">
  <div class="btn" id="left">‚¨ÖÔ∏è</div>
  <div class="btn" id="up">‚¨ÜÔ∏è</div>
  <div class="btn" id="right">‚û°Ô∏è</div>
  <div class="btn" id="shoot">üéØ</div>
</div>

<p class="info">
Pontua√ß√£o: <span id="score">0</span> |
Recorde: <span id="record">0</span>
</p>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

let score = 0;
let record = localStorage.getItem("record") || 0;
document.getElementById("record").innerText = record;

let gameOver = false;
let gravity = 0.8;
let difficulty = 1;

const player = {
  x: 170,
  y: 440,
  size: 20,
  speed: 5,
  vy: 0,
  onGround: true
};

const enemies = [];
const bullets = [];
const powerUps = [];

let left = false, right = false, up = false, shooting = false;

// BOT√ïES
const bind = (id, press, release) => {
  const b = document.getElementById(id);
  b.addEventListener("touchstart", e => { e.preventDefault(); press(); });
  b.addEventListener("touchend", e => { e.preventDefault(); release(); });
};

bind("left", () => left = true, () => left = false);
bind("right", () => right = true, () => right = false);
bind("up", () => up = true, () => up = false);
bind("shoot", () => shooting = true, () => shooting = false);

function spawnEnemy() {
  enemies.push({
    x: Math.random() * (canvas.width - 20),
    y: -20,
    size: 20,
    speed: 2 + difficulty
  });
}

function spawnPowerUp() {
  powerUps.push({
    x: Math.random() * (canvas.width - 15),
    y: -15,
    size: 15
  });
}

function shoot() {
  bullets.push({
    x: player.x + player.size / 2 - 3,
    y: player.y,
    speed: 7
  });
}

function update() {
  if (gameOver) return;

  ctx.clearRect(0, 0, canvas.width, canvas.height);

  // Movimento horizontal
  if (left && player.x > 0) player.x -= player.speed;
  if (right && player.x < canvas.width - player.size) player.x += player.speed;

  // Pulo
  if (up && player.onGround) {
    player.vy = -12;
    player.onGround = false;
  }

  player.vy += gravity;
  player.y += player.vy;

  if (player.y >= 440) {
    player.y = 440;
    player.vy = 0;
    player.onGround = true;
  }

  // Tiro
  if (shooting && Math.random() < 0.2) shoot();

  // Jogador
  ctx.fillStyle = "#0ff";
  ctx.fillRect(player.x, player.y, player.size, player.size);

  // Balas
  ctx.fillStyle = "#fff";
  bullets.forEach((b, i) => {
    b.y -= b.speed;
    ctx.fillRect(b.x, b.y, 6, 10);
    if (b.y < 0) bullets.splice(i, 1);
  });

  // Inimigos
  ctx.fillStyle = "red";
  enemies.forEach((e, i) => {
    e.y += e.speed;
    ctx.fillRect(e.x, e.y, e.size, e.size);

    // Colis√£o jogador
    if (
      e.x < player.x + player.size &&
      e.x + e.size > player.x &&
      e.y < player.y + player.size &&
      e.y + e.size > player.y
    ) {
      navigator.vibrate?.(300);
      gameOver = true;
      if (score > record) {
        localStorage.setItem("record", score);
      }
      alert("üíÄ GAME OVER\nPontua√ß√£o: " + score);
      location.reload();
    }

    // Colis√£o bala
    bullets.forEach((b, bi) => {
      if (
        b.x < e.x + e.size &&
        b.x + 6 > e.x &&
        b.y < e.y + e.size &&
        b.y + 10 > e.y
      ) {
        enemies.splice(i, 1);
        bullets.splice(bi, 1);
        score += 2;
      }
    });

    if (e.y > canvas.height) {
      enemies.splice(i, 1);
      score++;
    }
  });

  // Power-up
  ctx.fillStyle = "#ff0";
  powerUps.forEach((p, i) => {
    p.y += 2;
    ctx.fillRect(p.x, p.y, p.size, p.size);

    if (
      p.x < player.x + player.size &&
      p.x + p.size > player.x &&
      p.y < player.y + player.size &&
      p.y + p.size > player.y
    ) {
      score += 10;
      powerUps.splice(i, 1);
    }
  });

  document.getElementById("score").innerText = score;
  difficulty = 1 + score / 20;

  requestAnimationFrame(update);
}

// Spawns
setInterval(spawnEnemy, 900);
setInterval(spawnPowerUp, 8000);

update();
</script>

</body>
</html>
